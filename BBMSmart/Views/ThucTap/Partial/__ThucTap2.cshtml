@using System.Data
@using ProductAllTool.Models.ManageSales;
@{
    var lsthd = (List<objCombox>)Session["listhanhdongdc"];
    var listLoaidc = (List<objCombox>)Session["listLoaidc"];
}
<link href="~/Resource/Content/css/thickbox.css" rel="stylesheet" />
<script src="~/Resource/Scripts/thickbox.js"></script>
<table id="tbl_Item" class="table table-bordered" style="width:99.9%">
    <thead>
        @{
            if (Model != null)
            {
                var dt = Model as DataTable;
                if (dt.Rows.Count > 0)
                {
                    <tr style="background: #ffffff; border-bottom: 1px solid #ddd !important; border-top: 1px solid #fff; border-left: 1px solid #fff; border-right: 1px solid #fff !important;">
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                        <td class="text-right" style="border: none !important;"></td>
                    </tr>
                }
            }
        }
        <tr>
            <th class="text-left" style="vertical-align: top">
                ID
            </th>
            <th class="text-left" style="vertical-align: top">
                Function
            </th>
            <th class="text-left" style="vertical-align: top">
                CH TSF
            </th>
            <th class="text-left" style="vertical-align: top">
                Brand
            </th>
            <th class="text-left" style="vertical-align: top">
                Miền
            </th>
            <th class="text-left" style="vertical-align: top">
                Tỉnh
            </th>
            <th class="text-left" style="vertical-align: top">
                Mã CH
            </th>
            <th class="text-left" style="vertical-align: top">
                Tên CH
            </th>
            <th class="text-left" style="vertical-align: top">
                Mã <br />hàng
            </th>
            <th class="text-left" style="vertical-align: top">
                Tên hàng
            </th>
            <th class="text-left" style="vertical-align: top">
                PS ERP
            </th>
            <th class="text-left" style="vertical-align: top">
                DS ERP
            </th>
            <th class="text-left" style="vertical-align: top">
                Min PSF
            </th>
            <th class="text-left" style="vertical-align: top">
                SL tồn
            </th>
            <th class="text-left" style="vertical-align: top">
                SL bán D30
            </th>
            <th class="text-left" style="vertical-align: top">
                SL Đặt
            </th>
            <th class="text-left" style="vertical-align: top;">
                Từ ngày<br />
                @*<input type="date" class="form-control" id="fromall" onchange="fromall()" />*@
            </th>
            <th class="text-left" style="vertical-align: top">
                Đến ngày<br />
                @*<input type="date" class="form-control" id="toall" onchange="toall()" />*@
            </th>
            <th class="text-left" style="vertical-align: top">
                Lý do<br />

            </th>
            <th class="text-left" style="vertical-align: top">
                Chọn<br />
                <input type="checkbox" id="checkall" class="text-center" onchange="checkall()" />
            </th>
        </tr>
    </thead>
    <tbody>

        @{
            if (Model != null)
            {
                var dt = Model as DataTable;
                if (dt.Rows.Count > 0)
                {
                    var i = 0;
                    foreach (DataRow item in dt.Rows)
                    {
                        <tr id="row_@i">
                            <td class="text-left" style="width:65px; max-width: 65px;  overflow: hidden;white-space: nowrap" id="id_@i">
                                @item["ID"]
                            </td>
                            <td class="text-left" style="width: 100px; max-width: 100px;  overflow: hidden;white-space: nowrap">
                                @item["KhoChiaCode"]
                            </td>
                            <td class="text-right" style="width: 40px;">
                                @item["CHTSF"]
                            </td>
                            <td class="text-left" style="width: 40px; max-width: 40px;  overflow: hidden;white-space: nowrap">
                                @item["Brand"]
                            </td>
                            <td class="text-left" style="width: 40px;">
                                @item["Mien"]
                            </td>
                            <td class="text-left" style="width: 40px;">
                                @item["Tinh"]
                            </td>
                            <td class="text-left" style="max-width: 150px;  overflow: hidden;white-space: nowrap">
                                @item["StoreCode"]
                            </td>
                            <td class="text-left" style="width: 40px;">
                                @item["StoreName"]
                            </td>
                            <td class="text-left" style="  overflow: hidden;white-space: nowrap">
                                @item["ItemCode"]
                            </td>
                            <td class="text-right" style="width: 50px;">
                                @item["ItemName"]
                            <td class="text-right" style="width: 50px;">
                                @item["PSERP"]
                            </td>
                            <td class="text-right" style="width: 50px;">
                                @item["ERP"]
                            </td>
                            <td class="text-right" style="width: 50px;">
                                @item["PSF"]
                            </td>
                            <td class="text-right" style="width: 50px;">
                                @item["SLTon"]
                            </td>
                            <td class="text-right" style="width: 50px;">
                                @item["SLBanD30"]

                            </td>
                            <td class="text-left" style="width: 50px;">
                                @item["SLDuyet"]
                            </td>
                            <td class="text-left" style="width: 110px;">
                                @item["Createdate"]
                            </td>
                            <td class="text-left" style="width: 110px;">
                                @item["Aprovedate"]
                            </td>
                            <td class="text-left" style="width: 110px;">
                                <input type="text" id="LyDo_@i" value="@item["LyDo"]" />
                            </td>
                            <td class="text-center" style=" width: 20px;">
                                <input class="form-check-input" id="_@i" type="checkbox" name="check[]" value="@item["ID"]" />
                            </td>


                        </tr>
                        i++;
                    }
                }
            }
        }
    </tbody>
    <tfoot>
    </tfoot>
</table>
<script>

    //function js_psmoiall() {

    //    var cboxes = document.getElementsByName('psmoi');
    //    var psmoiall = $('#psmoiall').val();
    //    for (var i = 0; i < cboxes.length; i++) {
    //        $('#' + cboxes[i].id).val(psmoiall).trigger('change');
    //    }

    //}

    //function fromall() {
    //    var cboxes = document.getElementsByName('from');
    //    var fromall = $('#fromall').val();
    //    for (var i = 0; i < cboxes.length; i++) {
    //        $('#' + cboxes[i].id).val(fromall).trigger('change');
    //    }
    //}

    //function toall() {
    //    var cboxes = document.getElementsByName('to');
    //    var toall = $('#toall').val();
    //    for (var i = 0; i < cboxes.length; i++) {
    //        $('#' + cboxes[i].id).val(toall).trigger('change');
    //    }
    //}

    //function checkall() {
    //    var cboxes = document.getelementsbyname('check');
    //    var ischeck = $('#checkall').is(":check[]");
    //    for (var i = 0; i < cboxes.length; i++) {
    //        cboxes[i].checked = ischeck;
    //        $('#' + cboxes[i].id).trigger('change');
    //    }
    //}


    //function js_cal(id) {
    //    try {
    //        var ps = parseInt($('#ps_' + id).html().replaceAll(',', ''));
    //        var psmoi = parseInt($('#psmoi_' + id).val().replaceAll(',', ''));
    //        var ds = parseFloat($('#ds_' + id).html().replaceAll(',', ''));
    //        var dsmoi = parseFloat($('#dsmoi_' + id).html().replaceAll(',', ''));
    //        var hdd = parseFloat($('#hdd_' + id).html().replaceAll(',', ''));
    //        var slt = parseFloat($('#slt_' + id).html().replaceAll(',', ''));
    //        var frlt = parseFloat($('#frlt_' + id).html().replaceAll(',', ''));
    //        if (psmoi >= 0) {
    //            $('#psmoi_' + id).val(currencyFormat(psmoi));
    //            if (ps > 0) $('#sld_' + id).html(currencyFormat(psmoi + ds * frlt - slt - hdd));
    //            else $('#sld_' + id).html(currencyFormat(psmoi + dsmoi * frlt - slt - hdd));
    //            recalsld();
    //        } else {
    //            $('#psmoi_' + id).val('0');
    //            psmoi = 0;
    //            if (ps > 0) $('#sld_' + id).html(currencyFormat(psmoi + ds * frlt - slt - hdd));
    //            else $('#sld_' + id).html(currencyFormat(psmoi + dsmoi * frlt - slt - hdd));
    //            recalsld();
    //        }
    //        fnSaveBak(id);
    //    } catch (error) { }
    //}

    //function recalsld() {
    //    var cboxes = document.getElementsByName('soluongdat');
    //    var sumsld = 0;
    //    for (var i = 0; i < cboxes.length; i++) {
    //        var sld = parseFloat($('#' + cboxes[i].id).html().replaceAll(',', ''));
    //        if (!isNaN(sld)) sumsld += sld;
    //    }
    //    $('#sumSLDat').html(currencyFormat(sumsld));
    //}

    //function fnSaveBak(strID) {

    //    var ar = {};
    //    ar.mahang = $('#mh_' + strID).html();
    //    ar.mach = $('#mch_' + strID).html();
    //    ar.psmoi = $('#psmoi_' + strID).val().replaceAll(',', '');
    //    ar.dsmoi = $('#dsmoi_' + strID).html().replaceAll(',', '');
    //    ar.sldat = $('#sld_' + strID).html().replaceAll(',', '');
    //    ar.fromdate = $('#from_' + strID).val();
    //    ar.todate = $('#to_' + strID).val();
    //    ar.fstatus = $('#_' + strID).is(":checked") ? '1' : '0';

    //    $.ajax({
    //        type: "POST",
    //        url: "/Po2/aron_edit",
    //        data: JSON.stringify(ar),
    //        contentType: "application/json; charset=utf-8",
    //        dataType: "json",
    //        success: function (rt) {
    //            if (rt.code == 0) {

    //            } else {

    //            }
    //        }
    //    });
    //}
    function clearcheck(k) {
        var cboxes = document.getElementsByName('check[]');
        for (var i = 0; i < cboxes.length; i++) {
            if (cboxes[i].checked) {
                cboxes[i].checked = false;
            }
        }
        $("#_" + k).prop('checked', true);
    }
    function checkall() {
        var cboxes = document.getElementsByName('check[]');
        for (var i = 0; i < cboxes.length; i++) {
            if ($('#checkall').is(":checked")) {
                cboxes[i].checked = true;
            }
            else {
                cboxes[i].checked = false;
            }
        }
    }

</script>


